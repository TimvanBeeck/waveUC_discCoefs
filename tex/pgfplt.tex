\usepackage{stmaryrd} %for double brackets
% plots
\usepackage{pgf,tikz}
\usetikzlibrary{spy,matrix, calc, arrows,shapes,decorations}
\usepackage{tkz-euclide}
\usetikzlibrary{positioning,arrows,calc,decorations.markings,math,arrows.meta}
\usepackage{pgfplots} 
\usepgfplotslibrary{groupplots}
% tabels
\usepackage{csvsimple} 
%\usepackage{floatrow}
\usepackage{siunitx} %for scientific numbers \num
\usepackage{tabularx}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage[normalem]{ulem}
\useunder{\uline}{\ul}{}


%%%%% PGF Plot macros

\pgfplotscreateplotcyclelist{paulcolors}{%
violet,every mark/.append style={solid,fill=violet},mark=square*,very thick,mark size=3pt\\%
teal,every mark/.append style={solid,fill=teal},mark=*,very thick,mark size=3pt\\%
orange,every mark/.append style={solid,fill=orange},mark=diamond*,very thick,mark size=3pt\\%
violet,densely dashed,every mark/.append style={solid,fill=violet},mark=square*,very thick,mark size=3pt\\%
teal,densely dashed,every mark/.append style={solid,fill=teal},mark=*,very thick,mark size=3pt\\%
orange,densely dashed,every mark/.append style={solid,fill=orange},mark=diamond*,very thick,mark size=3pt\\%
violet,dash dot,every mark/.append style={solid,fill=violet},mark=square*,very thick,mark size=3pt\\%
teal,dash dot,every mark/.append style={solid,fill=teal},mark=*,very thick,mark size=3pt\\%
orange,dash dot,every mark/.append style={solid,fill=orange},mark=diamond*,very thick,mark size=3pt\\%
%cyan,every mark/.append style={fill=cyan},mark=star\\%
}
\pgfplotscreateplotcyclelist{paulcolors2}{%
teal,every mark/.append style={solid,fill=teal},mark=*,very thick,mark size=3pt\\%
orange,every mark/.append style={solid,fill=orange},mark=diamond*,very thick,mark size=3pt\\%
teal,densely dashed,every mark/.append style={solid,fill=teal},mark=*,very thick,mark size=3pt\\%
orange,densely dashed,every mark/.append style={solid,fill=orange},mark=diamond*,very thick,mark size=3pt\\%
teal,dash dot,every mark/.append style={solid,fill=teal},mark=*,very thick,mark size=3pt\\%
orange,dash dot,every mark/.append style={solid,fill=orange},mark=diamond*,very thick,mark size=3pt\\%
}
\pgfplotscreateplotcyclelist{paulcolors1}{%
teal,every mark/.append style={solid,fill=teal},mark=*,very thick,mark size=3pt\\%
}
\pgfplotscreateplotcyclelist{paulcolorsfill}{%
teal,fill=teal,fill opacity=0.5,thick\\
orange,fill=orange,fill opacity=0.5,thick\\
violet,fill=violet,fill opacity=0.5,thick\\
}

\pgfplotscreateplotcyclelist{barcolors}{%
teal,fill=teal,fill opacity=0.5,thick\\
teal,fill=teal,fill opacity=0.5,thick,postaction={pattern=crosshatch dots,pattern color=teal}\\
orange,fill=orange,fill opacity=0.5,thick\\
orange,fill=orange,fill opacity=0.5,thick,postaction={pattern=crosshatch dots, pattern color=orange}\\
}

\pgfplotscreateplotcyclelist{barcolors2}{%
teal,fill=teal,fill opacity=0.5,thick\\
orange,fill=orange,fill opacity=0.5,thick\\
teal,fill=teal,fill opacity=0.5,thick,postaction={pattern=crosshatch dots,pattern color=teal}\\
orange,fill=orange,fill opacity=0.5,thick,postaction={pattern=crosshatch dots, pattern color=orange}\\
}

\pgfplotscreateplotcyclelist{barcolors3}{%
teal,fill=teal,fill opacity=0.7,thick,postaction={pattern=crosshatch dots,pattern color=teal}\\
orange,fill=orange,fill opacity=0.7,thick,postaction={pattern=crosshatch dots, pattern color=orange}\\
}


\pgfplotsset{
    discard if not/.style 2 args={
        x filter/.append code={
            \edef\tempa{\thisrow{#1}}
            \edef\tempb{#2}
            \ifx\tempa\tempb
            \else
                \def\pgfmathresult{inf}
            \fi
        }
    }
}
\pgfplotsset{compat=1.16}%1.16 %avoid warning

\pgfplotsset{tick label style={font=\small},label style={font=\small},legend style={font=\small},}
\pgfplotsset{ width=.49\linewidth}

%%% START MACRO FOR ANNOTATION OF TRIANGLE WITH SLOPE %%%.
\newcommand{\logLogSlopeTriangle}[5]
{
    % #1. Relative offset in x direction.
    % #2. Width in x direction, so xA-xB.
    % #3. Relative offset in y direction.
    % #4. Slope d(y)/d(log10(x)).
    % #5. Plot options.

    \pgfplotsextra
    {
        \pgfkeysgetvalue{/pgfplots/xmin}{\xmin}
        \pgfkeysgetvalue{/pgfplots/xmax}{\xmax}
        \pgfkeysgetvalue{/pgfplots/ymin}{\ymin}
        \pgfkeysgetvalue{/pgfplots/ymax}{\ymax}

        % Calculate auxilliary quantities, in relative sense.
        \pgfmathsetmacro{\xArel}{#1}
        \pgfmathsetmacro{\yArel}{#3}
        \pgfmathsetmacro{\xBrel}{#1-#2}
        \pgfmathsetmacro{\yBrel}{\yArel}
        \pgfmathsetmacro{\xCrel}{\xArel}
        %\pgfmathsetmacro{\yCrel}{ln(\yC/exp(\ymin))/ln(exp(\ymax)/exp(\ymin))} % REPLACE THIS EXPRESSION WITH AN EXPRESSION INDEPENDENT OF \yC TO PREVENT THE 'DIMENSION TOO LARGE' ERROR.

        \pgfmathsetmacro{\lnxB}{\xmin*(1-(#1-#2))+\xmax*(#1-#2)} % in [xmin,xmax].
        \pgfmathsetmacro{\lnxA}{\xmin*(1-#1)+\xmax*#1} % in [xmin,xmax].
        \pgfmathsetmacro{\lnyA}{\ymin*(1-#3)+\ymax*#3} % in [ymin,ymax].
        \pgfmathsetmacro{\lnyC}{\lnyA-#4*(\lnxA-\lnxB)}
        \pgfmathsetmacro{\yCrel}{\lnyC-\ymin)/(\ymax-\ymin)} % THE IMPROVED EXPRESSION WITHOUT 'DIMENSION TOO LARGE' ERROR.

        % Define coordinates for \draw. MIND THE 'rel axis cs' as opposed to the 'axis cs'.
        \coordinate (A) at (rel axis cs:\xArel,\yArel);
        \coordinate (B) at (rel axis cs:\xBrel,\yBrel);
        \coordinate (C) at (rel axis cs:\xCrel,\yCrel);

        % Draw slope triangle.
        \draw[#5]   (A)-- node[pos=0.5,anchor=north] {}
                    (B)-- 
                    (C)-- node[pos=0.5,anchor=west] {#4}
                    cycle;
    }
}
%%% END MACRO FOR ANNOTATION OF TRIANGLE WITH SLOPE %%%.


\usepackage{listings}
%\usepackage[lined,commentsnumbered]{algorithm2e}
\usepackage[plain]{algorithm}
%\usepackage{algpseudocodex}

\definecolor{maroon}{cmyk}{0, 0.87, 0.68, 0.32}
\definecolor{halfgray}{gray}{0.55}
\definecolor{ipython_frame}{RGB}{207, 207, 207}
\definecolor{ipython_bg}{RGB}{247, 247, 247}
\definecolor{ipython_red}{RGB}{186, 33, 33}
\definecolor{ipython_green}{RGB}{0, 128, 0}
\definecolor{ipython_cyan}{RGB}{64, 128, 128}
\definecolor{ipython_purple}{RGB}{170, 34, 255}

\lstset{
    breaklines=true,
    %
    extendedchars=true,
    literate=
    {á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1
    {Á}{{\'A}}1 {É}{{\'E}}1 {Í}{{\'I}}1 {Ó}{{\'O}}1 {Ú}{{\'U}}1
    {à}{{\`a}}1 {è}{{\`e}}1 {ì}{{\`i}}1 {ò}{{\`o}}1 {ù}{{\`u}}1
    {À}{{\`A}}1 {È}{{\'E}}1 {Ì}{{\`I}}1 {Ò}{{\`O}}1 {Ù}{{\`U}}1
    {ä}{{\"a}}1 {ë}{{\"e}}1 {ï}{{\"i}}1 {ö}{{\"o}}1 {ü}{{\"u}}1
    {Ä}{{\"A}}1 {Ë}{{\"E}}1 {Ï}{{\"I}}1 {Ö}{{\"O}}1 {Ü}{{\"U}}1
    {â}{{\^a}}1 {ê}{{\^e}}1 {î}{{\^i}}1 {ô}{{\^o}}1 {û}{{\^u}}1
    {Â}{{\^A}}1 {Ê}{{\^E}}1 {Î}{{\^I}}1 {Ô}{{\^O}}1 {Û}{{\^U}}1
    {œ}{{\oe}}1 {Œ}{{\OE}}1 {æ}{{\ae}}1 {Æ}{{\AE}}1 {ß}{{\ss}}1
    {ç}{{\c c}}1 {Ç}{{\c C}}1 {ø}{{\o}}1 {å}{{\r a}}1 {Å}{{\r A}}1
    {€}{{\EUR}}1 {£}{{\pounds}}1
}

\lstdefinelanguage{iPython}{
    %morekeywords={access,and,break,class,continue,def,del,elif,else,except,exec,finally,for,from,global,if,import,in,is,lambda,not,or,pass,print,raise,return,try,while},%
    %
    % Built-ins
    morekeywords=[2]{abs,all,any,basestring,bin,bool,bytearray,callable,chr,classmethod,cmp,compile,complex,delattr,dict,dir,divmod,enumerate,eval,execfile,file,filter,float,format,frozenset,getattr,globals,hasattr,hash,help,hex,id,input,int,isinstance,issubclass,iter,len,list,locals,long,map,max,memoryview,min,next,object,oct,open,ord,pow,property,range,raw_input,reduce,reload,repr,reversed,round,set,setattr,slice,sorted,staticmethod,str,sum,super,tuple,type,unichr,unicode,vars,xrange,zip,apply,buffer,coerce,intern},%
    %
    sensitive=true,%
    morecomment=[l]\#,%
    morestring=[b]',%
    morestring=[b]",%
    %
    morestring=[s]{'''}{'''},% used for documentation text (mulitiline strings)
    morestring=[s]{"""}{"""},% added by Philipp Matthias Hahn
    %
    morestring=[s]{r'}{'},% `raw' strings
    morestring=[s]{r"}{"},%
    morestring=[s]{r'''}{'''},%
    morestring=[s]{r"""}{"""},%
    morestring=[s]{u'}{'},% unicode strings
    morestring=[s]{u"}{"},%
    morestring=[s]{u'''}{'''},%
    morestring=[s]{u"""}{"""},%
    %
    % {replace}{replacement}{lenght of replace}
    % *{-}{-}{1} will not replace in comments and so on
    literate=
    {á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1
    {Á}{{\'A}}1 {É}{{\'E}}1 {Í}{{\'I}}1 {Ó}{{\'O}}1 {Ú}{{\'U}}1
    {à}{{\`a}}1 {è}{{\`e}}1 {ì}{{\`i}}1 {ò}{{\`o}}1 {ù}{{\`u}}1
    {À}{{\`A}}1 {È}{{\'E}}1 {Ì}{{\`I}}1 {Ò}{{\`O}}1 {Ù}{{\`U}}1
    {ä}{{\"a}}1 {ë}{{\"e}}1 {ï}{{\"i}}1 {ö}{{\"o}}1 {ü}{{\"u}}1
    {Ä}{{\"A}}1 {Ë}{{\"E}}1 {Ï}{{\"I}}1 {Ö}{{\"O}}1 {Ü}{{\"U}}1
    {â}{{\^a}}1 {ê}{{\^e}}1 {î}{{\^i}}1 {ô}{{\^o}}1 {û}{{\^u}}1
    {Â}{{\^A}}1 {Ê}{{\^E}}1 {Î}{{\^I}}1 {Ô}{{\^O}}1 {Û}{{\^U}}1
    {œ}{{\oe}}1 {Œ}{{\OE}}1 {æ}{{\ae}}1 {Æ}{{\AE}}1 {ß}{{\ss}}1
    {ç}{{\c c}}1 {Ç}{{\c C}}1 {ø}{{\o}}1 {å}{{\r a}}1 {Å}{{\r A}}1
    {€}{{\EUR}}1 {£}{{\pounds}}1
    %
    {^}{{{\color{ipython_purple}\^{}}}}1
    {=}{{{\color{ipython_purple}=}}}1
    %
    {+}{{{\color{ipython_purple}+}}}1
    {*}{{{\color{ipython_purple}$^\ast$}}}1
    {/}{{{\color{ipython_purple}/}}}1
    %
    {+=}{{{+=}}}1
    {-=}{{{-=}}}1
    {*=}{{{$^\ast$=}}}1
    {/=}{{{/=}}}1,
    literate=
    *{-}{{{\color{ipython_purple}-}}}1
     {?}{{{\color{ipython_purple}?}}}1,
    %
    identifierstyle=\color{black}\ttfamily,
    commentstyle=\color{ipython_cyan}\ttfamily,
    stringstyle=\color{ipython_red}\ttfamily,
    keepspaces=true,
    showspaces=false,
    showstringspaces=false,
    %
    rulecolor=\color{ipython_frame},
    %frame=single,
    %frameround={t}{t}{t}{t},
    framexleftmargin=0mm,
    numbers=left,
    numberstyle=\tiny\color{halfgray},
    numbersep=1mm,
    %
    %
    xleftmargin=1mm,
    %backgroundcolor=\color{ipython_bg},
    %   extendedchars=true,
    basicstyle=\scriptsize,
    keywordstyle=\color{ipython_green}\ttfamily,
}


\lstdefinestyle{trefftzy}{
    language=iPython,
    emptylines=1,
    breaklines=true,
    basicstyle=\footnotesize\ttfamily\color{black},    
    moredelim=**[is][\color{teal}]{<}{>},
    moredelim=**[is][\color{purple}]{'}{'},
}

